<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NAVGATI 2026 | Event Registration</title>

    <!-- Google Fonts -->
    <link
        href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&family=Inter:wght@400;500&display=swap"
        rel="stylesheet">

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

    <style>
        /* ===============================
           IPAD OS PRO GLASSMORPHISM STYLE
           =============================== */

        :root {
            /* Apple-like dark mode palette */
            --bg-primary: #0B0F14;
            --glass-bg: rgba(28, 28, 30, 0.4);
            --glass-border: rgba(255, 255, 255, 0.08);
            --glass-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);

            --text-primary: #FFFFFF;
            --text-secondary: #8E8E93;
            /* iOS Gray */

            --accent-blue: #0A84FF;
            /* iOS Blue */
            --accent-indigo: #5E5CE6;
            --accent-pink: #FF375F;

            /* Fluid Motion Curves */
            --apple-curve: cubic-bezier(0.16, 1, 0.3, 1);
        }

        * {
            box-sizing: border-box;
            /* System font stack for Apple feel */
            font-family: -apple-system, BlinkMacSystemFont, "SF Pro Display", "Inter", "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            cursor: none !important;
        }

        /* Keep default cursor on touch devices */
        @media (hover: none) and (pointer: coarse) {
            * {
                cursor: auto !important;
            }
        }

        body {
            margin: 0;
            background-color: var(--bg-primary);
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* Dynamic Fluid Background Glow */
        body::before {
            content: "";
            position: fixed;
            inset: -50%;
            z-index: -1;
            background: radial-gradient(circle at 50% 0%, rgba(31, 182, 255, 0.25) 0%, transparent 40%);
            filter: blur(80px);
            animation: fluidMotion 15s ease-in-out infinite alternate;
            pointer-events: none;
        }

        @keyframes fluidMotion {
            0% {
                transform: scale(1) translate(0, 0);
            }

            50% {
                transform: scale(1.05) translate(0, 3%);
            }

            100% {
                transform: scale(1) translate(0, -2%);
            }
        }

        .page {
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            padding: 8vh 20px;
        }

        /* 
         ===============================
         MAIN CONTAINER - IPAD MODAL
         =============================== 
        */
        .container {
            width: 100%;
            max-width: 740px;
            padding: 56px;

            background: var(--glass-bg);
            /* Massive blur for iOS hyper-glass effect */
            backdrop-filter: blur(48px) saturate(200%);
            -webkit-backdrop-filter: blur(48px) saturate(200%);

            /* Squircle-like radii */
            border-radius: 36px;
            border: 1px solid var(--glass-border);

            box-shadow:
                var(--glass-shadow),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);

            /* Smooth Entrance */
            animation: appLaunch 1.2s var(--apple-curve) forwards;
            will-change: transform, opacity;
        }

        @keyframes appLaunch {
            from {
                opacity: 0;
                transform: scale(0.92) translateY(30px);
            }

            to {
                opacity: 1;
                transform: scale(1) translateY(0);
            }
        }

        /* Typography */
        .header {
            text-align: center;
            margin-bottom: 48px;
        }

        .event-logo {
            height: 48px;
            width: auto;
            margin-bottom: 24px;
            opacity: 0.9;
        }

        .event-title {
            font-weight: 700;
            font-size: 28px;
            letter-spacing: -0.02em;
            /* Tight tracking */
            margin-bottom: 16px;
            background: linear-gradient(180deg, #FFFFFF 0%, #EBEBF5 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .instruction-title {
            font-size: 13px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            color: var(--text-secondary);
            margin-top: 32px;
            margin-bottom: 16px;
        }

        .instructions {
            list-style: none;
            padding: 0;
            margin: 0 auto;
            max-width: 600px;
            text-align: left;
        }

        .instructions li {
            font-size: 15px;
            color: rgba(235, 235, 245, 0.8);
            line-height: 1.5;
            margin-bottom: 12px;
            display: flex;
            align-items: flex-start;
            gap: 12px;
        }

        .instructions li::before {
            content: "";
            display: inline-block;
            width: 6px;
            height: 6px;
            background: var(--accent-blue);
            border-radius: 50%;
            margin-top: 8px;
            flex-shrink: 0;
        }

        /* 
         ===============================
         FORM ELEMENTS (SETTINGS STYLE)
         =============================== 
        */
        label {
            display: block;
            margin-top: 24px;
            margin-bottom: 8px;
            font-size: 14px;
            font-weight: 500;
            color: var(--text-secondary);
            padding-left: 4px;
            transition: color 0.4s var(--apple-curve);
        }

        input,
        select {
            width: 100%;
            height: 52px;
            padding: 0 20px;

            background: rgba(118, 118, 128, 0.24);
            border: 1px solid transparent;
            border-radius: 16px;
            /* Pill-like */

            color: var(--text-primary);
            font-size: 17px;
            font-weight: 400;
            outline: none;

            transition: all 0.5s var(--apple-curve);
        }

        input::placeholder {
            color: rgba(235, 235, 245, 0.3);
        }

        input:focus,
        select:focus {
            background: rgba(118, 118, 128, 0.36);
            border-color: rgba(255, 255, 255, 0.15);
            /* Outer glow simulating Apple focus ring */
            box-shadow: 0 0 0 4px rgba(10, 132, 255, 0.3);
        }

        /* Focus styles explicitly affecting label */
        input:focus-visible+label,
        input:focus-within+label {
            color: var(--text-primary);
        }

        /* Phone Field Specific */
        .phone-field {
            display: flex;
            align-items: center;
            width: 100%;
            height: 52px;

            background: rgba(118, 118, 128, 0.24);
            border-radius: 16px;
            border: 1px solid transparent;
            overflow: hidden;

            transition: all 0.5s var(--apple-curve);
        }

        .phone-field:focus-within {
            background: rgba(118, 118, 128, 0.36);
            border-color: rgba(255, 255, 255, 0.15);
            box-shadow: 0 0 0 4px rgba(10, 132, 255, 0.3);
        }

        .country-code {
            padding: 0 16px;
            color: var(--text-secondary);
            font-size: 17px;
            font-weight: 500;
            border-right: 1px solid rgba(255, 255, 255, 0.1);
            height: 60%;
            display: flex;
            align-items: center;
        }

        .phone-field input {
            flex: 1;
            height: 100%;
            background: transparent;
            border: none;
            border-radius: 0;
            box-shadow: none !important;
            padding: 0 16px;
        }

        /* 
         ===============================
         BUTTONS
         =============================== 
        */
        .btn {
            width: 100%;
            margin-top: 40px;
            padding: 18px 24px;

            background: linear-gradient(135deg,
                    rgba(31, 182, 255, 0.85),
                    rgba(255, 79, 216, 0.85));

            color: white;
            border-radius: 999px;
            backdrop-filter: blur(14px);
            border: 1px solid rgba(255, 255, 255, 0.35);

            font-size: 17px;
            font-weight: 600;
            letter-spacing: 0.14em;
            text-transform: uppercase;

            cursor: pointer;
            overflow: hidden;
            position: relative;

            box-shadow:
                0 0 0 rgba(31, 182, 255, 0),
                0 30px 80px rgba(31, 182, 255, 0.35);

            animation: ctaBreath 4.5s ease-in-out infinite;
            transition:
                transform 0.5s cubic-bezier(.2, .8, .2, 1),
                box-shadow 0.5s ease;
        }

        .btn::after {
            content: "";
            position: absolute;
            inset: 0;
            background: linear-gradient(120deg,
                    transparent 20%,
                    rgba(255, 255, 255, 0.6) 40%,
                    transparent 60%);
            transform: translateX(-120%);
        }

        .btn:hover {
            transform: translateY(-3px) scale(1.03);
            box-shadow:
                0 25px 90px rgba(255, 79, 216, 0.45),
                inset 0 0 0 1px rgba(255, 255, 255, 0.4);
        }

        .btn:hover::after {
            animation: shineSweep 0.9s ease forwards;
        }

        .btn:active {
            transform: scale(0.98);
        }

        @keyframes ctaBreath {

            0%,
            100% {
                box-shadow:
                    0 20px 60px rgba(31, 182, 255, 0.35);
            }

            50% {
                box-shadow:
                    0 30px 90px rgba(255, 79, 216, 0.55);
            }
        }

        @keyframes shineSweep {
            to {
                transform: translateX(120%);
            }
        }

        /* Secondary inverted button style for participants submit */
        .participants .btn {
            background: linear-gradient(135deg, rgba(31, 182, 255, 0.9), rgba(255, 79, 216, 0.9));
            box-shadow: 0 14px 40px rgba(31, 182, 255, 0.35);
        }

        /* 
         ===============================
         CUSTOM DROPDOWN (Event Select)
         =============================== 
        */
        .custom-select {
            position: relative;
            margin-top: 8px;
        }

        .select-trigger {
            height: 52px;
            padding: 0 20px;
            border-radius: 16px;
            background: rgba(118, 118, 128, 0.24);
            border: 1px solid transparent;

            font-size: 17px;
            color: var(--text-primary);

            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
            transition: all 0.5s var(--apple-curve);
        }

        .select-trigger:hover {
            background: rgba(118, 118, 128, 0.3);
        }

        .select-options {
            position: absolute;
            top: calc(100% + 8px);
            width: 100%;

            background: rgba(28, 28, 30, 0.85);
            backdrop-filter: blur(40px) saturate(200%);
            -webkit-backdrop-filter: blur(40px) saturate(200%);

            border-radius: 20px;
            border: 1px solid var(--glass-border);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.5);

            padding: 8px;
            max-height: 320px;
            overflow-y: auto;

            opacity: 0;
            transform: scale(0.95) translateY(-10px);
            transform-origin: top;
            pointer-events: none;

            transition: all 0.7s var(--apple-curve);
            z-index: 50;

            /* Hide Scrollbar */
            scrollbar-width: none;
            /* Firefox */
            -ms-overflow-style: none;
            /* IE/Edge */
        }

        /* Hide scrollbar for Webkit */
        .select-options::-webkit-scrollbar {
            display: none;
        }

        .custom-select.open .select-options {
            opacity: 1;
            transform: scale(1) translateY(0);
            pointer-events: auto;
        }

        .option {
            padding: 14px 16px;
            border-radius: 12px;
            font-size: 16px;
            cursor: pointer;
            transition: background 0.2s ease;
        }

        .option:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .arrow {
            font-size: 12px;
            opacity: 0.5;
            transition: transform 0.5s var(--apple-curve);
        }

        .custom-select.open .arrow {
            transform: rotate(-180deg);
        }

        /* 
         ===============================
         PARTICIPANTS & DYNAMIC CARDS
         =============================== 
        */
        .participants {
            margin-top: 40px;
            display: none;
            animation: slideUpFade 0.8s var(--apple-curve) forwards;
        }

        .participant-card {
            padding: 24px;
            margin-top: 24px;

            background: rgba(255, 255, 255, 0.03);
            border-radius: 24px;
            border: 1px solid var(--glass-border);
        }

        .leader,
        .participant-card>div:first-child {
            font-size: 13px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: var(--accent-blue);
            margin-bottom: 20px;
        }

        @keyframes slideUpFade {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* 
         ===============================
         POPUP MODAL
         =============================== 
        */
        .popup {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.4);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            padding: 20px;
        }

        .popup-box {
            background: rgba(28, 28, 30, 0.75);
            backdrop-filter: blur(60px) saturate(200%);
            -webkit-backdrop-filter: blur(60px) saturate(200%);

            padding: 40px 32px;
            border-radius: 36px;
            border: 1px solid var(--glass-border);

            text-align: center;
            max-width: 440px;
            width: 100%;

            box-shadow: 0 40px 100px rgba(0, 0, 0, 0.6);
            /* Modal Spring Entrance */
            animation: popIn 0.7s var(--apple-curve) forwards;
            will-change: transform, opacity;
        }

        @keyframes popIn {
            0% {
                opacity: 0;
                transform: scale(0.8) translateY(20px);
            }

            100% {
                opacity: 1;
                transform: scale(1) translateY(0);
            }
        }

        .tick {
            width: 72px;
            height: 72px;
            border-radius: 50%;
            background: rgba(48, 209, 88, 0.15);
            /* iOS Green */
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 0 auto 24px;
            position: relative;
        }

        .tick svg {
            width: 32px;
            height: 32px;
            stroke: #30D158;
            stroke-width: 3.5;
            fill: none;
            stroke-dasharray: 100;
            stroke-dashoffset: 100;
            animation: drawTick 0.8s var(--apple-curve) forwards 0.2s;
        }

        @keyframes drawTick {
            to {
                stroke-dashoffset: 0;
            }
        }

        .popup-box h3 {
            font-size: 22px;
            font-weight: 600;
            margin: 0 0 24px 0;
            letter-spacing: -0.01em;
        }

        .reg-card {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 24px;
            border: 1px solid rgba(255, 255, 255, 0.05);
        }

        .card-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            font-size: 15px;
        }

        .card-row:last-child {
            border-bottom: none;
        }

        .card-row span {
            color: var(--text-secondary);
        }

        .card-row strong {
            font-weight: 500;
        }

        .reg-note {
            font-size: 13px;
            color: var(--text-secondary);
            line-height: 1.5;
            margin-bottom: 32px;
        }

        .popup .btn {
            margin-top: 0;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            padding: 16px;
        }

        .popup .btn:hover {
            background: rgba(255, 255, 255, 0.15);
        }

        /* Loading Spinner Apple Style */
        .loading-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(10px);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 2000;
        }

        .spinner {
            width: 44px;
            height: 44px;
            border: 3px solid rgba(255, 255, 255, 0.1);
            border-top: 3px solid #FFFFFF;
            border-radius: 50%;
            animation: spin 1s cubic-bezier(0.6, 0.2, 0.4, 0.8) infinite;
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }

        /* Glass cursor preservation */
        .glass-arrow-cursor {
            position: fixed;
            top: 0;
            left: 0;
            width: 18px;
            height: 18px;
            pointer-events: none;
            z-index: 9999;

            /* Arrow shape */
            clip-path: polygon(0% 0%,
                    100% 50%,
                    60% 60%,
                    50% 100%,
                    40% 60%,
                    0% 100%);

            background: rgba(255, 255, 255, 0.35);
            backdrop-filter: blur(6px);
            -webkit-backdrop-filter: blur(6px);

            border: 1px solid rgba(255, 255, 255, 0.4);
            box-shadow:
                0 0 12px rgba(31, 182, 255, 0.5),
                inset 0 0 6px rgba(255, 255, 255, 0.6);

            transform: translate(-10%, -10%);
            transition:
                transform 0.15s ease,
                box-shadow 0.2s ease,
                background 0.2s ease;
        }

        /* Hover state */
        .glass-arrow-cursor.active {
            background: rgba(255, 255, 255, 0.55);
            box-shadow:
                0 0 20px rgba(255, 79, 216, 0.6),
                inset 0 0 10px rgba(255, 255, 255, 0.7);
        }

        @media (max-width: 600px) {
            .container {
                padding: 32px 24px;
                border-radius: 28px;
            }

            .event-title {
                font-size: 24px;
            }
        }

        /* TOAST NOTIFICATIONS */
        .toast-container {
            position: fixed;
            top: 40px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 100000;
            display: flex;
            flex-direction: column;
            gap: 12px;
            align-items: center;
            pointer-events: none;
        }

        .toast {
            background: rgba(28, 28, 30, 0.85);
            backdrop-filter: blur(24px) saturate(200%);
            -webkit-backdrop-filter: blur(24px) saturate(200%);
            border: 1px solid rgba(255, 255, 255, 0.15);
            color: white;
            padding: 14px 28px;
            border-radius: 999px;
            font-size: 15px;
            font-weight: 500;
            letter-spacing: 0.02em;
            box-shadow: 0 16px 40px rgba(0, 0, 0, 0.4);

            transform: translateY(-20px) scale(0.95);
            opacity: 0;
            animation: toastIn 0.4s var(--apple-curve) forwards;
        }

        .toast.hiding {
            animation: toastOut 0.3s ease-in forwards;
        }

        @keyframes toastIn {
            to {
                transform: translateY(0) scale(1);
                opacity: 1;
            }
        }

        @keyframes toastOut {
            to {
                transform: translateY(-20px) scale(0.95);
                opacity: 0;
            }
        }

        /* PROGRESS INDICATOR */
        .progress-indicator {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 40px;
            padding: 0 10px;
        }

        .step {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
            opacity: 0.4;
            transition: opacity 0.4s ease;
        }

        .step.active {
            opacity: 1;
        }

        .step-num {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            font-weight: 600;
            font-family: 'Poppins', sans-serif;
            color: white;
            transition: all 0.4s ease;
        }

        .step.active .step-num {
            background: linear-gradient(135deg, rgba(31, 182, 255, 0.85), rgba(255, 79, 216, 0.85));
            border-color: rgba(255, 255, 255, 0.4);
            box-shadow: 0 4px 16px rgba(31, 182, 255, 0.3);
        }

        .step-label {
            font-size: 11px;
            letter-spacing: 0.08em;
            text-transform: uppercase;
            font-weight: 600;
            color: var(--text-secondary);
        }

        .step.active .step-label {
            color: white;
        }

        .step-line {
            flex: 1;
            height: 2px;
            background: rgba(255, 255, 255, 0.1);
            margin: 0 16px;
            transform: translateY(-10px);
        }

        .ghost-btn {
            background: transparent !important;
            border: 1px solid rgba(255, 255, 255, 0.2) !important;
            box-shadow: none !important;
            color: var(--text-secondary) !important;
        }

        .ghost-btn:hover {
            background: rgba(255, 255, 255, 0.05) !important;
            color: white !important;
            box-shadow: none !important;
        }

        /* Countdown */
        .countdown {
            display: flex;
            justify-content: center;
            gap: 16px;
            margin-bottom: 32px;
            animation: fadeIn 1s ease forwards;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .time-box {
            min-width: 80px;
            padding: 14px 10px;
            background: rgba(255, 255, 255, 0.06);
            border: 1px solid var(--glass-border);
            border-radius: 14px;
            backdrop-filter: blur(10px);
            text-align: center;
        }

        .time-box span {
            display: block;
            font-family: 'Poppins', sans-serif;
            font-size: 24px;
            font-weight: 600;
            background: linear-gradient(135deg,
                    var(--accent-blue),
                    var(--accent-pink));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .time-box small {
            display: block;
            margin-top: 6px;
            font-size: 11px;
            letter-spacing: 0.15em;
            text-transform: uppercase;
            color: var(--text-secondary);
        }
    </style>
</head>

<!-- LOADING OVERLAY -->
<div class="loading-overlay" id="loadingOverlay">
    <div class="spinner"></div>
</div>

<body>

    <div class="toast-container" id="toastContainer"></div>

    <div class="page">
        <div class="container">
            <!-- PROGRESS INDICATOR -->
            <div class="progress-indicator">
                <div class="step active" id="step1">
                    <span class="step-num">1</span>
                    <span class="step-label">Event Details</span>
                </div>
                <div class="step-line"></div>
                <div class="step" id="step2">
                    <span class="step-num">2</span>
                    <span class="step-label">Participants</span>
                </div>
                <div class="step-line"></div>
                <div class="step" id="step3">
                    <span class="step-num">3</span>
                    <span class="step-label">Confirmation</span>
                </div>
            </div>

            <!-- HEADER SECTION -->
            <div class="header">
                <img src="navgati-logo.png" alt="NAVGATI Logo" class="event-logo">
                <h1 class="event-title">EVENT REGISTRATION</h1>

                <!-- Countdown -->
                <div class="countdown" id="countdown">
                    <div class="time-box">
                        <span id="days">00</span>
                        <small>Days</small>
                    </div>
                    <div class="time-box">
                        <span id="hours">00</span>
                        <small>Hours</small>
                    </div>
                    <div class="time-box">
                        <span id="minutes">00</span>
                        <small>Minutes</small>
                    </div>
                    <div class="time-box">
                        <span id="seconds">00</span>
                        <small>Seconds</small>
                    </div>
                </div>
                <h2 class="instruction-title">General Instructions</h2>
                <ul class="instructions">
                    <li>All participants must provide valid contact details for official communication and verification
                        purposes.</li>
                    <li>Team size must strictly follow the selected event rules mentioned during registration.</li>
                    <li>Once submitted, registration details cannot be modified, so verify information carefully before
                        submission.</li>
                    <li>For entry fee payment and related queries, contact only: +91 9368859898. </li>
                </ul>
            </div>

            <!-- STEP 1 CONTAINER -->
            <div id="step1Container">
                <label>College Name</label>
                <input id="collegeName" required style="text-transform: uppercase;"
                    oninput="this.value = this.value.toUpperCase()">

                <label>College City</label>
                <input id="collegeCity" required style="text-transform: uppercase;"
                    oninput="this.value = this.value.toUpperCase()">

                <label>Event</label>

                <div class="custom-select" id="eventSelect">
                    <div class="select-trigger" id="selectedEvent">
                        SELECT EVENTS
                        <span class="arrow">▾</span>
                    </div>

                    <div class="select-options">
                        <div class="option" data-value="MARITIME QUIZ">MARITIME QUIZ</div>
                        <div class="option" data-value="PAPER PRESENTATION">PAPER PRESENTATION</div>
                        <div class="option" data-value="IPL AUCTION">IPL AUCTION</div>
                        <div class="option" data-value="SQUID GAME">SQUID GAME</div>
                        <div class="option" data-value="CANVAS CLASH">CANVAS CLASH</div>
                        <div class="option" data-value="BALLADS OF THE BLUE">BALLADS OF THE BLUE</div>
                        <div class="option" data-value="FIFA23">FIFA23</div>
                        <div class="option" data-value="FASHION CHRONICLES">FASHION CHRONICLES</div>
                        <div class="option" data-value="RHYTHM AND WAVES">RHYTHM AND WAVES</div>
                        <div class="option" data-value="CROWNED AT SEA">CROWNED AT SEA</div>
                        <div class="option" data-value="PITCH PERFECT">PITCH PERFECT</div>
                        <div class="option" data-value="FRAMES FROM THE DEEP">FRAMES FROM THE DEEP</div>
                        <div class="option" data-value="FUTSAL">FUTSAL</div>
                        <div class="option" data-value="MIC CHECK">MIC CHECK</div>
                        <div class="option" data-value="SHUTTER SWIRL">SHUTTER SWIRL</div>
                        <div class="option" data-value="ARM WRESTLING">ARM WRESTLING</div>
                    </div>
                </div>

                <input type="hidden" id="eventName">

                <label>Number of Participants</label>
                <input type="number" id="participantCount" min="1" max="10">

                <button class="btn" onclick="generateParticipants()">Continue to Participants</button>
            </div>

            <div class="participants" id="participantsSection">
                <div style="display: flex; gap: 16px; margin-top: 16px;">
                    <button class="btn ghost-btn" onclick="backToStep1()">Back</button>
                    <button class="btn" onclick="submitForm()">Submit Registration</button>
                </div>
            </div>
        </div>

        <!-- POPUP -->
        <div class="popup" id="popup">
            <div class="popup-box">
                <div class="tick">
                    <svg viewBox="0 0 24 24">
                        <path d="M5 13l4 4L19 7"></path>
                    </svg>
                </div>

                <h3>Registration Confirmed</h3>

                <!-- REGISTRATION CARD -->
                <div class="reg-card" id="registrationCard">
                    <div class="card-row">
                        <span>Team Leader</span>
                        <strong id="cardLeader">—</strong>
                    </div>

                    <div class="card-row">
                        <span>Event</span>
                        <strong id="cardEvent">—</strong>
                    </div>

                    <div class="card-row">
                        <span>Registration No</span>
                        <strong id="cardRegNo">—</strong>
                    </div>

                    <p class="reg-note">
                        Please save your registration number and keep a screenshot for future reference.<br>
                        The NAVGATI team will contact you with further instructions.<br>
                        Make payments only to the UPI ID provided on the Registration Page.<br>
                        For payment-related queries, use the contact details listed on the Registration Page.
                    </p>
                </div>

                <button class="btn" onclick="closePopup()">Close</button>
            </div>
        </div>

        <script>document.addEventListener("DOMContentLoaded", () => {
                const cursor = document.getElementById("glassCursor");
                if (!cursor) return;

                // Disable on touch devices
                if ("ontouchstart" in window || navigator.maxTouchPoints > 0) {
                    document.body.style.cursor = "auto";
                    cursor.style.display = "none";
                    return;
                }

                document.addEventListener("mousemove", (e) => {
                    cursor.style.left = e.clientX + "px";
                    cursor.style.top = e.clientY + "px";
                });

                const hoverTargets = ["a",
                    "button",
                    "input",
                    "select",
                    ".select-trigger",
                    ".option",
                    ".btn"
                ];

                hoverTargets.forEach(selector => {
                    document.querySelectorAll(selector).forEach(el => {
                        el.addEventListener("mouseenter", () => {
                            cursor.classList.add("active");
                        });

                        el.addEventListener("mouseleave", () => {
                            cursor.classList.remove("active");
                        });
                    });
                });

                document.addEventListener("mousedown", () => {
                    cursor.style.transform = "translate(-10%, -10%) scale(0.9)";
                });

                document.addEventListener("mouseup", () => {
                    cursor.style.transform = "translate(-10%, -10%) scale(1)";
                });
            });

            function closePopup() {
                const popup = document.getElementById("popup");
                popup.style.display = "none";

                // Try closing tab
                window.open('', '_self'); // Required for some browsers
                window.close();

                // Fallback (if browser blocks close)
                setTimeout(() => {
                    window.location.href = "about:blank";
                }

                    , 300);
            }

        </script>
        <script>const firebaseConfig = {
                apiKey: "AIzaSyBfcUk_ISZThkoAoFi9tTN0KirIj8cNvHk",
                authDomain: "navgati-2026.firebaseapp.com",
                databaseURL: "https://navgati-2026-default-rtdb.asia-southeast1.firebasedatabase.app",
                projectId: "navgati-2026",
                storageBucket: "navgati-2026.firebasestorage.app",
                messagingSenderId: "741378592624",
                appId: "1:741378592624:web:3f6ab0d0a69b8cb05d89b5",
                measurementId: "G-DXFNY9PWDP"
            }

                ;

            firebase.initializeApp(firebaseConfig);
            const db = firebase.firestore();

            function showToast(message) {
                const container = document.getElementById("toastContainer");
                const toast = document.createElement("div");
                toast.className = "toast";
                toast.innerText = message;

                container.appendChild(toast);

                setTimeout(() => {
                    toast.classList.add("hiding");
                    setTimeout(() => toast.remove(), 300);
                }

                    , 3000);
            }

            function validateParticipants() {
                const count = Number(document.getElementById("participantCount").value);

                for (let i = 1; i <= count; i++) {
                    const nameInput = document.getElementById("pname" + i);
                    const phoneInput = document.getElementById("pphone" + i);

                    if (!nameInput || nameInput.value.trim() === "") {
                        showToast("Please enter name for Participant " + i);
                        nameInput.focus();
                        return false;
                    }

                    if (!phoneInput || phoneInput.value.trim() === "") {
                        showToast("Please enter phone number for Participant " + i);
                        phoneInput.focus();
                        return false;
                    }

                    if (!/^[0-9]{10}$/.test(phoneInput.value)) {
                        showToast("Phone number for Participant " + i + " must be 10 digits");
                        phoneInput.focus();
                        return false;
                    }
                }

                return true;
            }

            function submitForm() {
                if (!validateParticipants()) {
                    return;
                }

                const count = Number(document.getElementById("participantCount").value);
                const event = document.getElementById("eventName").value;
                const year = new Date().getFullYear();

                const participants = [];

                for (let i = 1; i <= count; i++) {
                    participants.push({
                        name: document.getElementById("pname" + i).value,
                        phone: document.getElementById("pphone" + i).value,
                        leader: i === 1
                    });
                }

                document.getElementById("loadingOverlay").style.display = "flex";

                db.collection("registrations").add({
                    collegeName: document.getElementById("collegeName").value.trim(),
                    collegeCity: document.getElementById("collegeCity").value.trim(),
                    event: event,
                    participants: participants,
                    timestamp: firebase.firestore.FieldValue.serverTimestamp()
                }).then((docRef) => {
                    const firebaseId = docRef.id;
                    let numericHash = 0;

                    for (let i = 0; i < firebaseId.length; i++) {
                        numericHash += firebaseId.charCodeAt(i);
                    }

                    const uniquePart = String(numericHash).padStart(6, "0").slice(0, 6);

                    const EVENT_CODES = {
                        "MARITIME QUIZ": "01",
                        "PAPER PRESENTATION": "02",
                        "IPL AUCTION": "03",
                        "SQUID GAME": "04",
                        "CANVAS CLASH": "05",
                        "BALLADS OF THE BLUE": "06",
                        "FIFA23": "07",
                        "FASHION CHRONICLES": "08",
                        "RHYTHM AND WAVES": "09",
                        "CROWNED AT SEA": "10",
                        "PITCH PERFECT": "11",
                        "FRAMES FROM THE DEEP": "12",
                        "FUTSAL": "13",
                        "MIC CHECK": "14",
                        "SHUTTER SWIRL": "15",
                        "ARM WRESTLING": "16"
                    };

                    const eventCode = EVENT_CODES[event] || "00";
                    const registrationNumber = year + eventCode + uniquePart;

                    return db.collection("registrations").doc(docRef.id).update({
                        registrationNumber
                    }).then(() => ({
                        registrationNumber,
                        leader: participants[0].name,
                        event
                    }));

                }).then((result) => {
                    document.getElementById("cardLeader").innerText = result.leader;
                    document.getElementById("cardEvent").innerText = result.event;
                    document.getElementById("cardRegNo").innerText = result.registrationNumber;

                    document.getElementById("loadingOverlay").style.display = "none";
                    document.getElementById("popup").style.display = "flex";

                    // Update Step 3
                    document.getElementById("step2").classList.remove("active");
                    document.getElementById("step3").classList.add("active");

                    // Trigger Confetti Burst
                    if (window.confetti) {
                        const duration = 3000;
                        const end = Date.now() + duration;

                        (function frame() {
                            confetti({
                                particleCount: 5,
                                angle: 60,
                                spread: 55,
                                origin: { x: 0 },
                                colors: ['#0A84FF', '#5E5CE6', '#FF375F']
                            });
                            confetti({
                                particleCount: 5,
                                angle: 120,
                                spread: 55,
                                origin: { x: 1 },
                                colors: ['#0A84FF', '#5E5CE6', '#FF375F']
                            });

                            if (Date.now() < end) {
                                requestAnimationFrame(frame);
                            }
                        }());
                    }

                }).catch((error) => {
                    console.error("Error:", error);
                    showToast("Something went wrong. Please try again.");
                    document.getElementById("loadingOverlay").style.display = "none";
                });
            }

            const select = document.getElementById("eventSelect");
            const selected = document.getElementById("selectedEvent");
            const hiddenEvent = document.getElementById("eventName");
            const participantInput = document.getElementById("participantCount");

            selected.addEventListener("click", (e) => {
                e.stopPropagation();
                select.classList.toggle("open");
            });

            document.querySelectorAll(".option").forEach(option => {
                option.addEventListener("click", (e) => {
                    e.stopPropagation();

                    const value = option.dataset.value;
                    const rule = EVENT_RULES[value];

                    selected.childNodes[0].nodeValue = rule.label + " ";
                    hiddenEvent.value = value;

                    participantInput.min = rule.min;
                    participantInput.max = rule.max;
                    participantInput.value = rule.min;

                    participantInput.placeholder = rule.min + " – " + rule.max + " participants";
                    select.classList.remove("open");
                });
            });

            document.addEventListener("click", () => {
                select.classList.remove("open");
            });

            const EVENT_RULES = {
                "MARITIME QUIZ": { label: "MARITIME QUIZ", min: 2, max: 2 },
                "PAPER PRESENTATION": { label: "PAPER PRESENTATION", min: 1, max: 3 },
                "IPL AUCTION": { label: "IPL AUCTION", min: 2, max: 2 },
                "SQUID GAME": { label: "SQUID GAME", min: 1, max: 1 },
                "CANVAS CLASH": { label: "CANVAS CLASH", min: 1, max: 1 },
                "BALLADS OF THE BLUE": { label: "BALLADS OF THE BLUE", min: 1, max: 5 },
                "FIFA23": { label: "FIFA23", min: 1, max: 1 },
                "FASHION CHRONICLES": { label: "FASHION CHRONICLES", min: 1, max: 10 },
                "RHYTHM AND WAVES": { label: "RHYTHM AND WAVES", min: 1, max: 15 },
                "CROWNED AT SEA": { label: "CROWNED AT SEA", min: 1, max: 1 },
                "PITCH PERFECT": { label: "PITCH PERFECT", min: 1, max: 5 },
                "FRAMES FROM THE DEEP": { label: "FRAMES FROM THE DEEP", min: 1, max: 5 },
                "FUTSAL": { label: "FUTSAL", min: 6, max: 8 },
                "MIC CHECK": { label: "MIC CHECK", min: 1, max: 1 },
                "SHUTTER SWIRL": { label: "SHUTTER SWIRL", min: 1, max: 1 },
                "ARM WRESTLING": { label: "ARM WRESTLING", min: 1, max: 1 }
            };

            function validateInitialForm() {
                const collegeName = document.getElementById("collegeName").value.trim();
                const collegeCity = document.getElementById("collegeCity").value.trim();
                const eventName = document.getElementById("eventName").value;
                const participantCount = document.getElementById("participantCount").value;

                if (!collegeName) {
                    showToast("Please enter College Name");
                    return false;
                }

                if (!collegeCity) {
                    showToast("Please enter College City");
                    return false;
                }

                if (!eventName) {
                    showToast("Please select an Event");
                    return false;
                }

                if (!participantCount || participantCount <= 0) {
                    showToast("Please enter valid number of participants");
                    return false;
                }

                return true;
            }

            function generateParticipants() {
                if (!validateInitialForm()) return;

                const eventKey = document.getElementById("eventName").value;
                const count = Number(document.getElementById("participantCount").value);
                const section = document.getElementById("participantsSection");

                const ruleMin = EVENT_RULES[eventKey].min;
                const ruleMax = EVENT_RULES[eventKey].max;

                if (count < ruleMin || count > ruleMax) {
                    showToast("This event allows " + ruleMin + " to " + ruleMax + " participants only.");
                    return;
                }

                let htmlContent = "";

                for (let i = 1; i <= count; i++) {
                    const headerHTML = i === 1 ? '<div class="leader">Participant 1 – Team Leader</div>' : '<div>Participant ' + i + '</div>';
                    htmlContent += '<div class="participant-card">' + headerHTML +
                        '<label>Name</label>' +
                        '<input id="pname' + i + '" required style="text-transform: uppercase;" oninput="this.value = this.value.toUpperCase()">' +
                        '<label>Phone Number</label>' +
                        '<div class="phone-field"><span class="country-code">+91</span>' +
                        '<input type="tel" id="pphone' + i + '" maxlength="10" pattern="[0-9]{10}" inputmode="numeric" placeholder="Enter 10-digit number" required oninput="this.value=this.value.replace(/[^0-9]/g, \'\')">' +
                        '</div></div>';
                }

                htmlContent += '<div style="display: flex; gap: 16px; margin-top: 16px;">' +
                    '<button class="btn ghost-btn" onclick="backToStep1()">Back</button>' +
                    '<button class="btn" onclick="submitForm()">Submit Registration</button>' +
                    '</div>';

                section.innerHTML = htmlContent;

                document.getElementById("step1Container").style.display = "none";
                section.style.display = "block";

                document.getElementById("step1").classList.remove("active");
                document.getElementById("step2").classList.add("active");
            }

            function backToStep1() {
                document.getElementById("participantsSection").style.display = "none";
                document.getElementById("step1Container").style.display = "block";

                document.getElementById("step2").classList.remove("active");
                document.getElementById("step1").classList.add("active");
            }

            // Countdown Logic
            const eventDate = new Date("March 12, 2026 09:00:00").getTime();

            const countdown = setInterval(() => {
                const now = new Date().getTime();
                const distance = eventDate - now;

                if (distance < 0) {
                    clearInterval(countdown);
                    const countdownEl = document.getElementById("countdown");
                    if (countdownEl) {
                        countdownEl.innerHTML = "<div style='color: white; font-weight: 500; font-size: 16px;'>Event Live Now</div>";
                    }
                    return;
                }

                const days = Math.floor(distance / (1000 * 60 * 60 * 24));
                const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((distance % (1000 * 60)) / 1000);

                const dEl = document.getElementById("days");
                const hEl = document.getElementById("hours");
                const mEl = document.getElementById("minutes");
                const sEl = document.getElementById("seconds");

                if (dEl) dEl.innerText = String(days).padStart(2, "0");
                if (hEl) hEl.innerText = String(hours).padStart(2, "0");
                if (mEl) mEl.innerText = String(minutes).padStart(2, "0");
                if (sEl) sEl.innerText = String(seconds).padStart(2, "0");
            }, 1000);

        </script>
        <!-- Confetti Library -->
        <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    </div>
    <div class="glass-arrow-cursor" id="glassCursor"></div>
</body>

</html>
